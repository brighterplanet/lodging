<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>impact_model.rb</title>
  <link rel="stylesheet" href="https://raw.githubusercontent.com/jashkenas/docco/master/resources/classic/docco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>impact_model.rb</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        <p>Copyright Â© 2010 Brighter Planet.
See LICENSE for details.
Contact Brighter Planet for dual-license arrangements.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">require</span> <span class="s1">&#39;earth/fuel/fuel&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;earth/fuel/greenhouse_gas&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;earth/hospitality/commercial_building_energy_consumption_survey_response&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;earth/locality/country&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;earth/locality/electricity_mix&#39;</span></pre></div>
      </td>
    </tr>
    <tr id='section-Lodging_impact_model'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Lodging_impact_model">&#182;</a>
        </div>
        <h1>Lodging impact model</h1>

<p>This model is used by the <a href="http://brighterplanet.com">Brighter Planet</a> <a href="http://carbon.brighterplanet.com">CM1 web service</a> to calculate the impacts of a lodging (e.g. a hotel stay), such as energy use, greenhouse gas emissions, and water use.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Timeframe'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Timeframe">&#182;</a>
        </div>
        <h4>Timeframe</h4>

<p>The model calculates impacts that occured during a particular time period (<code>timeframe</code>).
For example if the <code>timeframe</code> is February 2010, a lodging that occurred (<code>date</code>) on February 15, 2010 will have impacts, but a lodging that occurred on January 31, 2010 will have zero impacts.</p>

<p>The default <code>timeframe</code> is the current calendar year.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Calculations'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Calculations">&#182;</a>
        </div>
        <h4>Calculations</h4>

<p>The final impacts are the result of the calculations below. These are performed in reverse order, starting with the last calculation listed and finishing with the greenhouse gas emissions calculation.</p>

<p>Each calculation listing shows:</p>

<ul>
<li>value returned (<em>units of measurement</em>)</li>
<li>description of the value</li>
<li>calculation methods, listed from most to least preferred</li>
</ul>

<p>Some methods use <code>values</code> returned by prior calculations. If any of these <code>values</code> are unknown the method is skipped.
If all the methods for a calculation are skipped, the value the calculation would return is unknown.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Standard_compliance'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Standard_compliance">&#182;</a>
        </div>
        <h4>Standard compliance</h4>

<p>When compliance with a particular standard is requested, all methods that do not comply with that standard are ignored.
Thus any <code>values</code> a method needs will have been calculated using a compliant method or will be unknown.
To see which standards a method complies with, look at the <code>:complies =&gt;</code> section of the code in the right column.</p>

<p>Client input complies with all standards.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Collaboration'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Collaboration">&#182;</a>
        </div>
        <h4>Collaboration</h4>

<p>Contributions to this impact model are actively encouraged and warmly welcomed. This library includes a comprehensive test suite to ensure that your changes do not cause regressions. All changes should include test coverage for new functionality. Please see <a href="https://github.com/brighterplanet/sniff#readme">sniff</a>, our emitter testing framework, for more information.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nb">require</span> <span class="s1">&#39;lodging/cbecs&#39;</span>

<span class="k">module</span> <span class="nn">BrighterPlanet</span>
  <span class="k">module</span> <span class="nn">Lodging</span>
    <span class="k">module</span> <span class="nn">ImpactModel</span>
      <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">included</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
        <span class="n">base</span><span class="o">.</span><span class="n">decide</span> <span class="ss">:impact</span><span class="p">,</span> <span class="ss">:with</span> <span class="o">=&gt;</span> <span class="ss">:characteristics</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <hr>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Carbon_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Carbon_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Carbon (<em>kg CO<sub>2</sub>e</em>)</h3>

<p><em>The lodging&#39;s total anthropogenic greenhouse gas emissions during <code>timeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:carbon</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-9'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
        </div>
        <p>Sum <code>co2 emission</code> (<em>kg</em>), <code>ch4 emission</code> (<em>kg CO<sub>2</sub>e</em>) and <code>n2o emission</code> (<em>kg CO<sub>2</sub>e</em>) to give <em>kg CO<sub>2</sub>e</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from co2 emission, ch4 emission, and n2o emission&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:co2_emission</span><span class="p">,</span> <span class="ss">:ch4_emission</span><span class="p">,</span> <span class="ss">:n2o_emission</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:co2_emission</span><span class="o">]</span> <span class="o">+</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:ch4_emission</span><span class="o">]</span> <span class="o">+</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:n2o_emission</span><span class="o">]</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-CO&lt;sub&gt;2&lt;/sub&gt;_emission_(&lt;em&gt;kg&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO&lt;sub&gt;2&lt;/sub&gt;_emission_(&lt;em&gt;kg&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>CO<sub>2</sub> emission (<em>kg</em>)</h3>

<p><em>The lodging&#39;s CO<sub>2</sub> emissions during <code>timeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:co2_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p>Multiply each <code>fuel use</code> (<em>MJ</em>) by its CO<sub>2</sub> emission factor (<em>kg / MJ</em>) to give <em>kg</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel uses and electricity mix&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_uses</span><span class="p">,</span> <span class="ss">:electricity_co2_emission_factor</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">gas</span> <span class="o">=</span> <span class="no">Fuel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Pipeline Natural Gas&#39;</span><span class="p">)</span>
                <span class="n">oil</span> <span class="o">=</span> <span class="no">Fuel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;Distillate Fuel Oil No. 2&#39;</span><span class="p">)</span>
                <span class="n">dh</span> <span class="o">=</span> <span class="no">Fuel</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;District Heat&#39;</span><span class="p">)</span>

                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:natural_gas</span><span class="o">]</span>   <span class="o">/</span> <span class="n">gas</span><span class="o">.</span><span class="n">energy_content</span> <span class="o">*</span> <span class="n">gas</span><span class="o">.</span><span class="n">co2_emission_factor</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:fuel_oil</span><span class="o">]</span>      <span class="o">/</span> <span class="n">oil</span><span class="o">.</span><span class="n">energy_content</span> <span class="o">*</span> <span class="n">oil</span><span class="o">.</span><span class="n">co2_emission_factor</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:district_heat</span><span class="o">]</span> <span class="o">/</span> <span class="n">dh</span><span class="o">.</span><span class="n">energy_content</span>  <span class="o">*</span> <span class="n">dh</span><span class="o">.</span><span class="n">co2_emission_factor</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:electricity</span><span class="o">].</span><span class="n">megajoules</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilowatt_hours</span><span class="p">)</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:electricity_co2_emission_factor</span><span class="o">]</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-CH&lt;sub&gt;4&lt;/sub&gt;_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CH&lt;sub&gt;4&lt;/sub&gt;_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>CH<sub>4</sub> emission (<em>kg CO<sub>2</sub>e</em>)</h3>

<p><em>The lodging&#39;s CH<sub>4</sub> emissions during <code>timeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:ch4_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-13'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-13">&#182;</a>
        </div>
        <p>Multiply each <code>fuel use</code> (<em>MJ</em>) by its CH<sub>4</sub> emission factor (<em>kg CO<sub>2</sub>e / MJ</em>) to give <em>kg CO<sub>2</sub>e</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel uses and electricity mix&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_uses</span><span class="p">,</span> <span class="ss">:electricity_ch4_emission_factor</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">ch4_gwp</span> <span class="o">=</span> <span class="no">GreenhouseGas</span><span class="o">[</span><span class="ss">:ch4</span><span class="o">].</span><span class="n">global_warming_potential</span>

                <span class="n">gas_ef</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">grams</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilograms</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">.</span><span class="n">kbtus</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">*</span> <span class="n">ch4_gwp</span>
                <span class="n">oil_ef</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="n">grams</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilograms</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">.</span><span class="n">kbtus</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">*</span> <span class="n">ch4_gwp</span>
                <span class="n">dh_ef</span>  <span class="o">=</span> <span class="p">(((</span><span class="n">gas_ef</span> <span class="o">/</span> <span class="mi">0</span><span class="o">.</span><span class="mi">817</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">oil_ef</span> <span class="o">/</span> <span class="mi">0</span><span class="o">.</span><span class="mi">846</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">0</span><span class="o">.</span><span class="mi">95</span>

                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:natural_gas</span><span class="o">]</span>   <span class="o">*</span> <span class="n">gas_ef</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:fuel_oil</span><span class="o">]</span>      <span class="o">*</span> <span class="n">oil_ef</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:district_heat</span><span class="o">]</span> <span class="o">*</span> <span class="n">dh_ef</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:electricity</span><span class="o">].</span><span class="n">megajoules</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilowatt_hours</span><span class="p">)</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:electricity_ch4_emission_factor</span><span class="o">]</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-N&lt;sub&gt;2&lt;/sub&gt;O_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-N&lt;sub&gt;2&lt;/sub&gt;O_emission_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>N<sub>2</sub>O emission (<em>kg CO<sub>2</sub>e</em>)</h3>

<p><em>The lodging&#39;s N<sub>2</sub>O emissions during <code>timeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:n2o_emission</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-15'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-15">&#182;</a>
        </div>
        <p>Multiply each <code>fuel use</code> (<em>MJ</em>) by its N<sub>2</sub>O emission factor (<em>kg CO<sub>2</sub>e / MJ</em>) to give <em>kg CO<sub>2</sub>e</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel uses and electricity mix&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:fuel_uses</span><span class="p">,</span> <span class="ss">:electricity_n2o_emission_factor</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">n2o_gwp</span> <span class="o">=</span> <span class="no">GreenhouseGas</span><span class="o">[</span><span class="ss">:n2o</span><span class="o">].</span><span class="n">global_warming_potential</span>

                <span class="n">gas_ef</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">grams</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilograms</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">.</span><span class="n">kbtus</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">*</span> <span class="n">n2o_gwp</span>
                <span class="n">oil_ef</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="n">grams</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilograms</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">.</span><span class="n">kbtus</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">*</span> <span class="n">n2o_gwp</span>
                <span class="n">dh_ef</span>  <span class="o">=</span> <span class="p">(((</span><span class="n">gas_ef</span> <span class="o">/</span> <span class="mi">0</span><span class="o">.</span><span class="mi">817</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">oil_ef</span> <span class="o">/</span> <span class="mi">0</span><span class="o">.</span><span class="mi">846</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">0</span><span class="o">.</span><span class="mi">95</span>

                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:natural_gas</span><span class="o">]</span>   <span class="o">*</span> <span class="n">gas_ef</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:fuel_oil</span><span class="o">]</span>      <span class="o">*</span> <span class="n">oil_ef</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:district_heat</span><span class="o">]</span> <span class="o">*</span> <span class="n">dh_ef</span><span class="p">)</span> <span class="o">+</span>
                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">][</span><span class="ss">:electricity</span><span class="o">].</span><span class="n">megajoules</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilowatt_hours</span><span class="p">)</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:electricity_n2o_emission_factor</span><span class="o">]</span><span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Energy_(&lt;em&gt;MJ&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Energy_(&lt;em&gt;MJ&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Energy (<em>MJ</em>)</h3>

<p><em>The lodging&#39;s total energy use during <code>timeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:energy</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p>Add all the <code>fuel uses</code> (<em>MJ</em>) to give <em>MJ</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel uses&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:fuel_uses</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_uses</span><span class="o">].</span><span class="n">values</span><span class="o">.</span><span class="n">sum</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Fuel_uses_(&lt;em&gt;MJ&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Fuel_uses_(&lt;em&gt;MJ&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Fuel uses (<em>MJ</em>)</h3>

<p><em>The lodging&#39;s use of each fuel during <code>timeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:fuel_uses</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p>Multiply each <code>adjusted fuel intensity</code> (<em>MJ / occupied room-night</em>) by <code>room nights</code> to give <em>MJ</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from adjusted fuel intensities and room nights&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:adjusted_fuel_intensities</span><span class="p">,</span> <span class="ss">:room_nights</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">intensities</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:adjusted_fuel_intensities</span><span class="o">]</span>
                <span class="p">{</span>
                  <span class="ss">:natural_gas</span>   <span class="o">=&gt;</span> <span class="n">intensities</span><span class="o">[</span><span class="ss">:natural_gas</span><span class="o">]</span>   <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:room_nights</span><span class="o">]</span><span class="p">,</span>
                  <span class="ss">:fuel_oil</span>      <span class="o">=&gt;</span> <span class="n">intensities</span><span class="o">[</span><span class="ss">:fuel_oil</span><span class="o">]</span>      <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:room_nights</span><span class="o">]</span><span class="p">,</span>
                  <span class="ss">:electricity</span>   <span class="o">=&gt;</span> <span class="n">intensities</span><span class="o">[</span><span class="ss">:electricity</span><span class="o">]</span>   <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:room_nights</span><span class="o">]</span><span class="p">,</span>
                  <span class="ss">:district_heat</span> <span class="o">=&gt;</span> <span class="n">intensities</span><span class="o">[</span><span class="ss">:district_heat</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:room_nights</span><span class="o">]</span>
                <span class="p">}</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Adjusted_fuel_intensities_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Adjusted_fuel_intensities_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Adjusted fuel intensities (<em>MJ / occupied room-night</em>)</h3>

<p><em>The lodging&#39;s use per occupied room night of a variety of fuels, adjusted by number of pools, mini-fridges, etc.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:adjusted_fuel_intensities</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-21'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-21">&#182;</a>
        </div>
        <p>Adjust <code>fuel intensities</code> based on any amenity adjustments:</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from fuel intensities and amenity adjustments&#39;</span><span class="p">,</span>
              <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:fuel_intensities</span><span class="p">,</span> <span class="ss">:appreciates</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:indoor_pool_adjustment</span><span class="p">,</span> <span class="ss">:outdoor_pool_adjustment</span><span class="p">,</span> <span class="ss">:refrigerator_adjustment</span><span class="p">,</span> <span class="ss">:hot_tub_adjustment</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">intensities</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:fuel_intensities</span><span class="o">].</span><span class="n">dup</span>
                <span class="n">pool_adjustment</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
                </pre></div>
      </td>
    </tr>
    <tr id='section-22'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-22">&#182;</a>
        </div>
        <p>Combine any pool energy adjustments.
Apply all other adjustments to the appropriate fuel intensity, but do not allow any adjusted fuel intensity to be less than zero.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">.</span><span class="n">except</span><span class="p">(</span><span class="ss">:fuel_intensities</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristic</span><span class="p">,</span> <span class="n">adjustment</span><span class="o">|</span>
                  <span class="n">adjustment</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">fuel</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
                    <span class="k">if</span> <span class="n">fuel</span> <span class="o">==</span> <span class="ss">:pool_energy</span>
                      <span class="n">pool_adjustment</span> <span class="o">+=</span> <span class="n">value</span>
                    <span class="k">elsif</span> <span class="p">(</span><span class="n">intensities</span><span class="o">[</span><span class="n">fuel</span><span class="o">]</span> <span class="o">+=</span> <span class="n">value</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
                      <span class="n">intensities</span><span class="o">[</span><span class="n">fuel</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
                    <span class="k">end</span>
                  <span class="k">end</span>
                <span class="k">end</span>
                </pre></div>
      </td>
    </tr>
    <tr id='section-23'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-23">&#182;</a>
        </div>
        <p>Apply the combined pool energy adjustment to natural gas, fuel oil, and electricity intensities, in that order.
If any adjusted intensity reaches zero, apply any remaining adjustment to the next fuel intensity.
If adjusted electricity intensity reaches zero, discard any remaining adjustment.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">if</span> <span class="n">pool_adjustment</span><span class="o">.</span><span class="n">abs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
                  <span class="k">if</span> <span class="p">(</span><span class="n">intensities</span><span class="o">[</span><span class="ss">:natural_gas</span><span class="o">]</span> <span class="o">+=</span> <span class="n">pool_adjustment</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">intensities</span><span class="o">[</span><span class="ss">:fuel_oil</span><span class="o">]</span> <span class="o">+=</span> <span class="n">intensities</span><span class="o">[</span><span class="ss">:natural_gas</span><span class="o">]</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
                      <span class="k">if</span> <span class="p">(</span><span class="n">intensities</span><span class="o">[</span><span class="ss">:electricity</span><span class="o">]</span> <span class="o">+=</span> <span class="n">intensities</span><span class="o">[</span><span class="ss">:fuel_oil</span><span class="o">]</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">.</span><span class="mi">0</span>
                        <span class="n">intensities</span><span class="o">[</span><span class="ss">:electricity</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span>
                      <span class="k">end</span>
                      <span class="n">intensities</span><span class="o">[</span><span class="ss">:fuel_oil</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">end</span>
                    <span class="n">intensities</span><span class="o">[</span><span class="ss">:natural_gas</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span>
                  <span class="k">end</span>
                <span class="k">end</span>
                <span class="n">intensities</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Outdoor_pools_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Outdoor_pools_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Outdoor pools adjustment (<em>MJ / occupied room-night</em>)</h3>

<p><em>Adjusts the natural gas intensity based on the number of outdoor pools.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:outdoor_pool_adjustment</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-25'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-25">&#182;</a>
        </div>
        <p>Assume outdoor pool energy intensity of 329,917 <em>BTU / night</em> per <a href="http://www.energystar.gov/ia/business/evaluate_performance/swimming_pool_tech_desc.pdf">Energy Star</a>.
Calculate the difference between <code>outdoor pools</code> and average outdoor pools.
Multiply the difference by outdoor pool energy intensity (<em>MJ / night</em>) and divide by <code>property rooms</code> and <code>occupancy rate</code> to give <em>MJ / occupied room-night</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from outdoor pools, property rooms, and occupancy rate&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:outdoor_pools</span><span class="p">,</span> <span class="ss">:property_rooms</span><span class="p">,</span> <span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">difference</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:outdoor_pools</span><span class="o">]</span> <span class="o">-</span> <span class="no">LodgingProperty</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">pools_outdoor</span>
                <span class="p">{</span> <span class="ss">:pool_energy</span> <span class="o">=&gt;</span> <span class="n">difference</span> <span class="o">*</span> <span class="mi">329_917</span><span class="o">.</span><span class="n">btus</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property_rooms</span><span class="o">]</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span> <span class="p">}</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Indoor_pools_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Indoor_pools_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Indoor pools adjustment (<em>MJ / occupied room-night</em>)</h3>

<p><em>Adjusts the natural gas intensity based on the number of indoor pools.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:indoor_pool_adjustment</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-27'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-27">&#182;</a>
        </div>
        <p>Assume indoor pool energy intensity of 2,770,942 <em>BTU / night</em> per <a href="http://www.energystar.gov/ia/business/evaluate_performance/swimming_pool_tech_desc.pdf">Energy Star</a>.
Calculate the difference between <code>indoor pools</code> and average indoor pools.
Multiply the difference by indoor pool energy intensity (<em>MJ / night</em>) and divide by <code>property rooms</code> and <code>occupancy rate</code> to give <em>MJ / occupied room-night</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from indoor pools, property rooms, and occupancy rate&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:indoor_pools</span><span class="p">,</span> <span class="ss">:property_rooms</span><span class="p">,</span> <span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">difference</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:indoor_pools</span><span class="o">]</span> <span class="o">-</span> <span class="no">LodgingProperty</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">pools_indoor</span>
                <span class="p">{</span> <span class="ss">:pool_energy</span> <span class="o">=&gt;</span> <span class="n">difference</span> <span class="o">*</span> <span class="mi">2_770_942</span><span class="o">.</span><span class="n">btus</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property_rooms</span><span class="o">]</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span> <span class="p">}</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Hot_tub_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Hot_tub_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Hot tub adjustment (<em>MJ / occupied room-night</em>)</h3>

<p><em>Adjusts the electricity intensity based on the number of hot tubs.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:hot_tub_adjustment</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-29'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-29">&#182;</a>
        </div>
        <p>Calculate the difference between <code>hot tubs</code> and average hot tubs.
Assume hot tub electricity intensity of 6.3 <em>kWh / night</em> per <a href="http://enduse.lbl.gov/info/LBNL-40297.pdf">LBL residential energy data sourcebook, p128</a>.
Multiply the difference by the hot tub electricity intensity (<em>kWh / night</em>) and divide by <code>property rooms</code> and <code>occupancy rate</code> to give <em>kWh / occupied room-night</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from hot tubs, property rooms, and occupancy rate&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:hot_tubs</span><span class="p">,</span> <span class="ss">:property_rooms</span><span class="p">,</span> <span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">difference</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:hot_tubs</span><span class="o">]</span> <span class="o">-</span> <span class="no">LodgingProperty</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">hot_tubs</span>
                <span class="p">{</span> <span class="ss">:electricity</span> <span class="o">=&gt;</span> <span class="n">difference</span> <span class="o">*</span> <span class="mi">6</span><span class="o">.</span><span class="mi">3</span><span class="o">.</span><span class="n">kilowatt_hours</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property_rooms</span><span class="o">]</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span> <span class="p">}</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Refrigerator_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Refrigerator_adjustment_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Refrigerator adjustment (<em>MJ / occupied room-night</em>)</h3>

<p><em>Adjusts the electricity intensity based on refrigerator coverage.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:refrigerator_adjustment</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-31'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-31">&#182;</a>
        </div>
        <p>Calculate the difference between <code>refrigerator coverage</code> (<em>refrigerators / room</em>) and average refrigerator coverage (<em>refrigerators / room</em>).
Assume an auto-defrost compact fridge electricity intensity of 1.18 <em>kWh / refrigerator night</em> per <a href="http://www.energystar.gov/ia/business/bulk_purchasing/bpsavings_calc/Bulk_Purchasing_CompactRefrig_Sav_Calc.xls">Energy Star</a>.
Multiply the difference (<em>refrigerators / room</em>) by the refrigerator electricity intensity (<em>kWh / refrigerator night</em>) and divide by <code>occupancy rate</code> to give <em>kWh / occupied room-night</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from refrigerator coverage and occupancy rate&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:refrigerator_coverage</span><span class="p">,</span> <span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">difference</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:refrigerator_coverage</span><span class="o">]</span> <span class="o">-</span> <span class="no">LodgingProperty</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">fridge_coverage</span>
                <span class="p">{</span> <span class="ss">:electricity</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">difference</span> <span class="o">*</span> <span class="mi">1</span><span class="o">.</span><span class="mi">18</span><span class="o">.</span><span class="n">kilowatt_hours</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:megajoules</span><span class="p">)</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">)</span> <span class="p">}</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Fuel_intensities_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Fuel_intensities_(&lt;em&gt;MJ_/_occupied_room-night&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Fuel intensities (<em>MJ / occupied room-night</em>)</h3>

<p><em>The lodging&#39;s use per occupied room night of a variety of fuels.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:fuel_intensities</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-33'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-33">&#182;</a>
        </div>
        <p>If we know <code>heating degree days</code> and <code>cooling degree days</code>, calculate fuel intensities from <a href="http://data.brighterplanet.com/commercial_building_energy_consumption_survey_responses">CBECS 2003</a> data using fuzzy inference and adjust the inferred values based on <code>occupancy rate</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from degree days, occupancy rate, and user inputs&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:heating_degree_days</span><span class="p">,</span> <span class="ss">:cooling_degree_days</span><span class="p">,</span> <span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span> <span class="ss">:appreciates</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:property_rooms</span><span class="p">,</span> <span class="ss">:floors</span><span class="p">,</span> <span class="ss">:construction_year</span><span class="p">,</span> <span class="ss">:ac_coverage</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">inputs</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">.</span><span class="n">dup</span>
                <span class="n">inputs</span><span class="o">.</span><span class="n">delete</span> <span class="ss">:occupancy_rate</span>
                <span class="n">inputs</span><span class="o">[</span><span class="ss">:lodging_rooms</span><span class="o">]</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="ss">:property_rooms</span><span class="p">)</span>
                <span class="n">inputs</span><span class="o">[</span><span class="ss">:percent_cooled</span><span class="o">]</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="ss">:ac_coverage</span><span class="p">)</span>
                <span class="n">inputs</span><span class="o">.</span><span class="n">delete_if</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">v</span><span class="o">.</span><span class="n">nil?</span> <span class="p">}</span>

                <span class="n">kernel</span> <span class="o">=</span> <span class="no">CommercialBuildingEnergyConsumptionSurveyResponse</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
                <span class="n">n</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">kernel</span><span class="o">.</span><span class="n">fuzzy_infer</span><span class="p">(</span><span class="ss">:natural_gas_per_room_night</span><span class="p">,</span> <span class="ss">:fuel_oil_per_room_night</span><span class="p">,</span> <span class="ss">:electricity_per_room_night</span><span class="p">,</span> <span class="ss">:district_heat_per_room_night</span><span class="p">)</span>
                <span class="p">{</span>
                  <span class="ss">:natural_gas</span>   <span class="o">=&gt;</span> <span class="n">n</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span>
                  <span class="ss">:fuel_oil</span>      <span class="o">=&gt;</span> <span class="n">f</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span>
                  <span class="ss">:electricity</span>   <span class="o">=&gt;</span> <span class="n">e</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span><span class="p">,</span>
                  <span class="ss">:district_heat</span> <span class="o">=&gt;</span> <span class="n">d</span> <span class="o">/</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:occupancy_rate</span><span class="o">]</span>
                <span class="p">}</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-34'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-34">&#182;</a>
        </div>
        <p>Otherwise use global averages.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span>
                <span class="n">intensities</span> <span class="o">=</span> <span class="p">{</span>
                  <span class="ss">:natural_gas</span> <span class="o">=&gt;</span>   <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_natural_gas_intensity</span>   <span class="o">/</span> <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_occupancy_rate</span><span class="p">,</span>
                  <span class="ss">:fuel_oil</span> <span class="o">=&gt;</span>      <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_fuel_oil_intensity</span>      <span class="o">/</span> <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_occupancy_rate</span><span class="p">,</span>
                  <span class="ss">:electricity</span> <span class="o">=&gt;</span>   <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_electricity_intensity</span>   <span class="o">/</span> <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_occupancy_rate</span><span class="p">,</span>
                  <span class="ss">:district_heat</span> <span class="o">=&gt;</span> <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_district_heat_intensity</span> <span class="o">/</span> <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_occupancy_rate</span>
                <span class="p">}</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Occupancy_rate'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Occupancy_rate">&#182;</a>
        </div>
        <h3>Occupancy rate</h3>

<p><em>The percent of the proprety&#39;s rooms that are occupied on an average night.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:occupancy_rate</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-36'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-36">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-37'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-37">&#182;</a>
        </div>
        <p>Look up the <code>country</code> average lodging occupancy rate.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">lodging_occupancy_rate</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-38'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-38">&#182;</a>
        </div>
        <p>Otherwise use a global average.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span>
              <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">lodging_occupancy_rate</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Outdoor_pools'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Outdoor_pools">&#182;</a>
        </div>
        <h3>Outdoor pools</h3>

<p><em>The number of outdoor pools.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:outdoor_pools</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-40'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-40">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-41'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-41">&#182;</a>
        </div>
        <p>Otherwise look up the <code>property</code> number of outdoor pools, but set a ceiling of 5 outdoor pools.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="k">unless</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">pools_outdoor</span><span class="o">.</span><span class="n">nil?</span>
                  <span class="o">[</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">pools_outdoor</span><span class="o">.</span><span class="n">to_f</span><span class="p">,</span> <span class="mi">5</span><span class="o">].</span><span class="n">min</span>
                <span class="k">end</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Indoor_pools'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Indoor_pools">&#182;</a>
        </div>
        <h3>Indoor pools</h3>

<p><em>The number of indoor pools.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:indoor_pools</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-43'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-43">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-44'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-44">&#182;</a>
        </div>
        <p>Otherwise look up the <code>property</code> number of indoor pools, but set a ceiling of 5 indoor pools.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="k">unless</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">pools_indoor</span><span class="o">.</span><span class="n">nil?</span>
                  <span class="o">[</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">pools_indoor</span><span class="o">.</span><span class="n">to_f</span><span class="p">,</span> <span class="mi">5</span><span class="o">].</span><span class="n">min</span>
                <span class="k">end</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Hot_tubs'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Hot_tubs">&#182;</a>
        </div>
        <h3>Hot tubs</h3>

<p><em>The number of hot tubs.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:hot_tubs</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-46'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-46">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-47'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-47">&#182;</a>
        </div>
        <p>Otherwise look up the <code>property</code> number of hot tubs.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">hot_tubs</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Refrigerator_coverage'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Refrigerator_coverage">&#182;</a>
        </div>
        <h3>Refrigerator coverage</h3>

<p><em>The percentage of property rooms that have refrigerators.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:refrigerator_coverage</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-49'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-49">&#182;</a>
        </div>
        <p>Use client input, if available.
Otherwise take whichever is greater of the <code>property</code> refrigerator coverage and mini bar coverage.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="k">if</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">mini_bar_coverage</span> <span class="o">||</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">fridge_coverage</span>
                  <span class="o">[</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">mini_bar_coverage</span><span class="o">.</span><span class="n">to_f</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">fridge_coverage</span><span class="o">.</span><span class="n">to_f</span><span class="o">].</span><span class="n">max</span>
                <span class="k">end</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-A/C_coverage'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-A/C_coverage">&#182;</a>
        </div>
        <h3>A/C coverage</h3>

<p><em>The percentage of property rooms that are air conditioned.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:ac_coverage</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-51'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-51">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-52'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-52">&#182;</a>
        </div>
        <p>Otherwise look up the <code>property</code> A/C coverage.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">ac_coverage</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Construction_year'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Construction_year">&#182;</a>
        </div>
        <h3>Construction year</h3>

<p><em>The year the property was built.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:construction_year</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-54'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-54">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-55'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-55">&#182;</a>
        </div>
        <p>Otherwise look up the year the <code>property</code> was built.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">construction_year</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Floors'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Floors">&#182;</a>
        </div>
        <h3>Floors</h3>

<p><em>The number of floors.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:floors</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-57'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-57">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-58'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-58">&#182;</a>
        </div>
        <p>Otherwise look up the <code>property</code> number of floors.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">floors</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Property_rooms'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Property_rooms">&#182;</a>
        </div>
        <h3>Property rooms</h3>

<p><em>The number of guest rooms in the property.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:property_rooms</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-60'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-60">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-61'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-61">&#182;</a>
        </div>
        <p>Otherwise look up the <code>property</code> number of rooms.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from property&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:property</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:property</span><span class="o">].</span><span class="n">lodging_rooms</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Property'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Property">&#182;</a>
        </div>
        <h3>Property</h3>

<p><em>The property where the stay occurred.</em></p>

<p>Use client input, if available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_CO&lt;sub&gt;2&lt;/sub&gt;_emission_factor_(&lt;em&gt;kg_/_kWh&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_CO&lt;sub&gt;2&lt;/sub&gt;_emission_factor_(&lt;em&gt;kg_/_kWh&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Electricity CO<sub>2</sub> emission factor (<em>kg / kWh</em>)</h3>

<p>*The CO<sub>2</sub> emission factor of the lodging&#39;s electricity.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:electricity_co2_emission_factor</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-64'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-64">&#182;</a>
        </div>
        <p>Use client input, if available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-65'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-65">&#182;</a>
        </div>
        <p>Otherwise use the <code>electricity mix</code> co2 emission factor.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from electricity mix&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:electricity_mix</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:electricity_mix</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_CH&lt;sub&gt;4&lt;/sub&gt;_emission_factor_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e/_kWh&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_CH&lt;sub&gt;4&lt;/sub&gt;_emission_factor_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e/_kWh&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Electricity CH<sub>4</sub> emission factor (<em>kg CO<sub>2</sub>e/ kWh</em>)</h3>

<p>*The CH<sub>4</sub> emission factor of the lodging&#39;s electricity.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:electricity_ch4_emission_factor</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-67'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-67">&#182;</a>
        </div>
        <p>Use client input, if available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-68'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-68">&#182;</a>
        </div>
        <p>Otherwise use the <code>electricity mix</code> ch4 emission factor.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from electricity mix&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:electricity_mix</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:electricity_mix</span><span class="o">].</span><span class="n">ch4_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_N&lt;sub&gt;2&lt;/sub&gt;O_emission_factor_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e/_kWh&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_N&lt;sub&gt;2&lt;/sub&gt;O_emission_factor_(&lt;em&gt;kg_CO&lt;sub&gt;2&lt;/sub&gt;e/_kWh&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Electricity N<sub>2</sub>O emission factor (<em>kg CO<sub>2</sub>e/ kWh</em>)</h3>

<p>*The N<sub>2</sub>O emission factor of the lodging&#39;s electricity.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:electricity_n2o_emission_factor</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-70'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-70">&#182;</a>
        </div>
        <p>Use client input, if available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-71'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-71">&#182;</a>
        </div>
        <p>Otherwise use the <code>electricity mix</code> n2o emission factor.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from electricity mix&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:electricity_mix</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:electricity_mix</span><span class="o">].</span><span class="n">n2o_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_mix'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_mix">&#182;</a>
        </div>
        <h3>Electricity mix</h3>

<p><em>The lodging&#39;s locality-specific <a href="http://data.brighterplanet.com/electricity_mixes">electricity mix</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:electricity_mix</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-73'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-73">&#182;</a>
        </div>
        <p>Use the <code>egrid subregion</code> electricity mix.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from egrid subregion&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:egrid_subregion</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:egrid_subregion</span><span class="o">].</span><span class="n">electricity_mix</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-74'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-74">&#182;</a>
        </div>
        <p>Otherwise if the user has not specified a country other than the US use the <code>state</code> electricity mix.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from state and country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:state</span><span class="p">,</span> <span class="ss">:country</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:state</span><span class="o">].</span><span class="n">electricity_mix</span> <span class="k">if</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">]</span> <span class="o">==</span> <span class="no">Country</span><span class="o">.</span><span class="n">united_states</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-75'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-75">&#182;</a>
        </div>
        <p>Otherwise use the <code>country</code> electricity mix.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">electricity_mix</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-76'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-76">&#182;</a>
        </div>
        <p>Otherwise use a global average electricity mix.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span>
                <span class="no">ElectricityMix</span><span class="o">.</span><span class="n">fallback</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Heating_degree_days'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Heating_degree_days">&#182;</a>
        </div>
        <h3>Heating degree days</h3>

<p><em>The average number of annual heating degree days (base 18Â°C) at the lodging&#39;s location.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:heating_degree_days</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-78'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-78">&#182;</a>
        </div>
        <p>Use client input, if available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-79'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-79">&#182;</a>
        </div>
        <p>Otherwise look up the <code>climate division</code> heating degree days.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from climate division&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:climate_division</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:climate_division</span><span class="o">].</span><span class="n">heating_degree_days</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-80'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-80">&#182;</a>
        </div>
        <p>Otherwise look up the <code>country</code> heating degree days.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">heating_degree_days</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Cooling_degree_days'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Cooling_degree_days">&#182;</a>
        </div>
        <h3>Cooling degree days</h3>

<p><em>The average number of annual cooling degree days (base 18Â°C) at the lodging&#39;s location.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:cooling_degree_days</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-82'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-82">&#182;</a>
        </div>
        <p>Use client input, if available</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-83'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-83">&#182;</a>
        </div>
        <p>Otherwise look up the <code>climate division</code> cooling degree days.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from climate division&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:climate_division</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:climate_division</span><span class="o">].</span><span class="n">cooling_degree_days</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-84'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-84">&#182;</a>
        </div>
        <p>Otherwise look up the <code>country</code> cooling degree days.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">cooling_degree_days</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Country'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country">&#182;</a>
        </div>
        <h3>Country</h3>

<p><em>The <a href="http://data.brighterplanet.com/countries">country</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:country</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-86'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-86">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-87'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-87">&#182;</a>
        </div>
        <p>Otherwise if state is defined then the country is the United States.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from state&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:state</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="no">Country</span><span class="o">.</span><span class="n">united_states</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-eGRID_subregion'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-eGRID_subregion">&#182;</a>
        </div>
        <h3>eGRID subregion</h3>

<p><em>The <a href="http://data.brighterplanet.com/egrid_subregions">eGRID subregion</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:egrid_subregion</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-89'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-89">&#182;</a>
        </div>
        <p>Look up the <code>zip code</code> eGRID subregion.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from zip code&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:zip_code</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:zip_code</span><span class="o">].</span><span class="n">egrid_subregion</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-State'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-State">&#182;</a>
        </div>
        <h3>State</h3>

<p><em>The <a href="http://data.brighterplanet.com/states">US state</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:state</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-91'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-91">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-92'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-92">&#182;</a>
        </div>
        <p>Otherwise look up the <code>zip code</code> state.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from zip code&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:zip_code</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:zip_code</span><span class="o">].</span><span class="n">state</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-City'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-City">&#182;</a>
        </div>
        <h3>City</h3>

<p><em>The city.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:city</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-94'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-94">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-95'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-95">&#182;</a>
        </div>
        <p>Otherwise look up the <code>zip code</code> description.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from zip code&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:zip_code</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:zip_code</span><span class="o">].</span><span class="n">description</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Climate_division'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Climate_division">&#182;</a>
        </div>
        <h3>Climate division</h3>

<p><em>The <a href="http://data.brighterplanet.com/climate_divisions">US climate division</a>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:climate_division</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-97'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-97">&#182;</a>
        </div>
        <p>Look up the <code>zip code</code> climate division.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from zip code&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:zip_code</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span>
                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:zip_code</span><span class="o">].</span><span class="n">climate_division</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Postcode'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Postcode">&#182;</a>
        </div>
        <h3>Postcode</h3>

<p><em>The postcode (use only outside the US).</em></p>

<p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Zip_code'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Zip_code">&#182;</a>
        </div>
        <h3>Zip code</h3>

<p><em>The <a href="http://data.brighterplanet.com/zip_codes">US zip code</a>.</em></p>

<p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Room_nights_(&lt;em&gt;room-nights&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Room_nights_(&lt;em&gt;room-nights&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Room nights (<em>room-nights</em>)</h3>

<p><em>The stay&#39;s room-nights that occurred during <code>timeframe</code>.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:room_nights</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-101'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-101">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-102'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-102">&#182;</a>
        </div>
        <p>Otherwise if <code>date</code> falls within <code>timeframe</code>, divide <code>duration</code> (<em>seconds</em>) by 86,400 (<em>seconds / night</em>) and multiply by <code>rooms</code> to give <em>room-nights</em>.
Otherwise <code>room nights</code> is zero.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rooms, duration, date, and timeframe&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:rooms</span><span class="p">,</span> <span class="ss">:duration</span><span class="p">,</span> <span class="ss">:date</span><span class="o">]</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:date</span><span class="o">].</span><span class="n">is_a?</span><span class="p">(</span><span class="no">Date</span><span class="p">)</span> <span class="p">?</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:date</span><span class="o">]</span> <span class="p">:</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:date</span><span class="o">].</span><span class="n">to_s</span><span class="p">)</span>
                <span class="n">timeframe</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="p">?</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:duration</span><span class="o">]</span> <span class="o">/</span> <span class="mi">86400</span><span class="o">.</span><span class="mi">0</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rooms</span><span class="o">]</span> <span class="p">:</span> <span class="mi">0</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Duration_(&lt;em&gt;seconds&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Duration_(&lt;em&gt;seconds&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Duration (<em>seconds</em>)</h3>

<p><em>The stay&#39;s duration. Use 24 hours for each night stayed. For example a two night stay would have a duration of 172800.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:duration</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-104'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-104">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-105'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-105">&#182;</a>
        </div>
        <p>Otherwise use 86400 <em>seconds</em> (1 night).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span> <span class="k">do</span>
              <span class="mi">86400</span><span class="o">.</span><span class="mi">0</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Rooms'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rooms">&#182;</a>
        </div>
        <h3>Rooms</h3>

<p><em>The number of rooms used.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:rooms</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-107'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-107">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-108'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-108">&#182;</a>
        </div>
        <p>Otherwise use 1 <em>room</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span> <span class="k">do</span>
              <span class="mi">1</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Date_(&lt;em&gt;date&lt;/em&gt;)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Date_(&lt;em&gt;date&lt;/em&gt;)">&#182;</a>
        </div>
        <h3>Date (<em>date</em>)</h3>

<p><em>The day the stay occurred.</em></p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:date</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-110'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-110">&#182;</a>
        </div>
        <p>Use client input, if available.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-111'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-111">&#182;</a>
        </div>
        <p>Otherwise use the first day of <code>timeframe</code>.</p>

      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from timeframe&#39;</span><span class="p">,</span>
              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="n">timeframe</span><span class="o">.</span><span class="n">from</span>
            <span class="k">end</span>
          <span class="k">end</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
